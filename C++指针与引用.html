<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>C++指针与引用 | Human6sa's Blog</title><meta name="keywords" content="C++语法"><meta name="author" content="Human6sa"><meta name="copyright" content="Human6sa"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="学OI的时候觉得指针很复杂，到了大学才发现它有大用处">
<meta property="og:type" content="article">
<meta property="og:title" content="C++指针与引用">
<meta property="og:url" content="https://human6sa.github.io/C++%E6%8C%87%E9%92%88%E4%B8%8E%E5%BC%95%E7%94%A8.html">
<meta property="og:site_name" content="Human6sa&#39;s Blog">
<meta property="og:description" content="学OI的时候觉得指针很复杂，到了大学才发现它有大用处">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://human6sa.github.io/img/bing/ParanalStars_ZH-CN9247250519_1920x1080.jpg">
<meta property="article:published_time" content="2022-11-23T09:21:09.000Z">
<meta property="article:modified_time" content="2022-12-08T13:15:48.239Z">
<meta property="article:author" content="Human6sa">
<meta property="article:tag" content="C++语法">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://human6sa.github.io/img/bing/ParanalStars_ZH-CN9247250519_1920x1080.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://human6sa.github.io/C++%E6%8C%87%E9%92%88%E4%B8%8E%E5%BC%95%E7%94%A8"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="&lt;meta name=&quot;baidu-site-verification&quot; content=&quot;code-fyZkyngDgY&quot; /&gt;"/><link rel="manifest" href="/img/pwa/manifest.json"/><link rel="apple-touch-icon" sizes="180x180" href="/img/pwa/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/pwa/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/pwa/16.png"/><link rel="mask-icon" href="/img/pwa/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5eb311ccfb724fdde2405cdc80110d7a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="/css/font.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'C++指针与引用',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-08 21:15:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="baidu-site-verification" content="code-fyZkyngDgY" /><link rel="stylesheet" href="/js/baidutongji.js"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/highlight.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="/img/blog_icon.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/resources/"><i class="fa-fw fas fa-cloud-download-alt"></i><span> 资源</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/bing/ParanalStars_ZH-CN9247250519_1920x1080.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Human6sa's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/resources/"><i class="fa-fw fas fa-cloud-download-alt"></i><span> 资源</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">C++指针与引用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-23T09:21:09.000Z" title="发表于 2022-11-23 17:21:09">2022-11-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-08T13:15:48.239Z" title="更新于 2022-12-08 21:15:48">2022-12-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/C/">C++</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="leancloud_visitors" id="/C++%E6%8C%87%E9%92%88%E4%B8%8E%E5%BC%95%E7%94%A8.html" data-flag-title="C++指针与引用"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span class="leancloud-visitors-count"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="内存地址与访问方式"><a href="#内存地址与访问方式" class="headerlink" title="内存地址与访问方式"></a>内存地址与访问方式</h1><p>内存地址：系统根据程序中定义变量的类型，给变量分配一定的长度空间。内存区的每个字节都有编号，称之为地址。</p>
<p>在 $C++$ 中，内存分成5个区：堆、栈、自由存储区、全局&#x2F;静态存储区和常量存储区。</p>
<ol>
<li><p>栈：由编译器自动分配释放，里面的变量通常是局部变量、函数参数等。</p>
</li>
<li><p>堆：由 $malloc$ 等分配的内存块，用 $free$ 来释放。</p>
</li>
<li><p>自由存储区：主要是由 $new$ 分配的内存块，释放由应用程序去控制，一般一个 $new$ 就要对应一个 $delete$ 。如果程序员没有释放掉，那么在程序结束后，操作系统会自动回收。</p>
</li>
<li><p>全局&#x2F;静态存储区：全局变量和静态变量被分配到同一块内存中，在程序启动时分配了它们的存储，但在程序开始执行之前可能不会初始化。</p>
</li>
<li><p>常量存储区：里面存放的是常量，不允许修改（当然，你要通过非正当手段也可以修改）。此区域中不能存在类类型的对象。</p>
</li>
</ol>
<blockquote>
<p>Free Store<br>The free store is one of the two dynamic memory areas, allocated&#x2F;freed by new&#x2F;delete. Object lifetime can be less than the time the storage is allocated; that is, free store objects can have memory allocated without being immediately initialized, and can be destroyed without the memory being immediately deallocated. During the period when the storage is allocated but outside the object’s lifetime, the storage may be accessed and manipulated through a void* but none of the proto-object’s nonstatic members or member functions may be accessed, have their addresses taken, or be otherwise manipulated.</p>
<p>Heap<br>The heap is the other dynamic memory area, allocated&#x2F;freed by malloc&#x2F;free and their variants. Note that while the default global new and delete might be implemented in terms of malloc and free by a particular compiler, the heap is not the same as free store and memory allocated in one area cannot be safely deallocated in the other. Memory allocated from the heap can be used for objects of class type by placement-new construction and explicit destruction. If so used, the notes about free store object lifetime apply similarly here.</p>
</blockquote>
<p>来源：<a target="_blank" rel="noopener" href="http://www.gotw.ca/gotw/009.htm">http://www.gotw.ca/gotw/009.htm</a></p>
<h1 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h1><p>指针变量：用于专门存放地址的变量。</p>
<h2 id="定义方式："><a href="#定义方式：" class="headerlink" title="定义方式："></a>定义方式：</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">类型表示符 *指针变量名;</span><br></pre></td></tr></table></figure>

<h2 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h2><p>&amp;用来取变量的地址</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">p=&amp;i;</span><br><span class="line"><span class="type">int</span> *p=&amp;i;</span><br></pre></td></tr></table></figure>

<p>*用来取指针指向地址的内容（解地址）</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *p,a[<span class="number">10</span>];</span><br><span class="line">p=a;</span><br><span class="line">p=&amp;a[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ol>
<li><p>void* 类型的指针可以指向任意类型的变量</p>
</li>
<li><p>指针在初始化时一般 int *p&#x3D;NULL;</p>
</li>
</ol>
<h2 id="数组指针"><a href="#数组指针" class="headerlink" title="数组指针"></a>数组指针</h2><p>存放一维或多维数组首地址的指针</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">3</span>][<span class="number">4</span>];</span><br><span class="line">a[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>,a[<span class="number">1</span>][<span class="number">0</span>]=<span class="number">2</span>;</span><br><span class="line"><span class="built_in">int</span> (*p)[<span class="number">4</span>]=a;</span><br><span class="line"><span class="comment">//p是一个指针，它指向包含4个元素的一维数组</span></span><br><span class="line">cout&lt;&lt;*p[<span class="number">0</span>]&lt;&lt;endl;</span><br><span class="line">p++;<span class="comment">//指向下一行的首地址</span></span><br><span class="line">cout&lt;&lt;*p[<span class="number">0</span>]&lt;&lt;endl;</span><br></pre></td></tr></table></figure>

<h2 id="指针与二维数组"><a href="#指针与二维数组" class="headerlink" title="指针与二维数组"></a>指针与二维数组</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">a代表二维数组的首地址，第<span class="number">0</span>行的地址</span><br><span class="line">a+i代表第i行的地址</span><br><span class="line">*(a+i)即a[i] 代表第i行第<span class="number">0</span>列的地址</span><br><span class="line">*(a+i)+j即a[i]+j 代表第i行第例的地址</span><br><span class="line">*(*(a+i)+j)即a[i][j] 代表第i行第j列的元素</span><br></pre></td></tr></table></figure>

<h2 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h2><p>指向函数的指针变量</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">返回值类型 (* 指针变量名)(形参列表);</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">max</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;<span class="keyword">return</span> x&lt;y;&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">bool</span> (*cmp)(<span class="type">int</span>,<span class="type">int</span>);</span><br><span class="line">    cmp=max;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">cmp</span>(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可作为某个函数的参数</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sort</span>(Stu a[],<span class="type">int</span> n,<span class="built_in">bool</span> (*cmp)(<span class="type">const</span> Stu &amp;a,<span class="type">const</span> Stu &amp;b))</span><br></pre></td></tr></table></figure>

<h2 id="作为函数值的返回类型"><a href="#作为函数值的返回类型" class="headerlink" title="作为函数值的返回类型"></a>作为函数值的返回类型</h2><p>可用于<strong>给函数返回值赋值</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> value[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> *<span class="title">GetPointerValue</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;<span class="keyword">return</span> &amp;value[i];&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> *<span class="title">GetPointersValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> *r=<span class="keyword">new</span> <span class="type">int</span>[<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++) r[i]=value[i];</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout&lt;&lt;value[<span class="number">0</span>]&lt;&lt;endl;</span><br><span class="line">    *<span class="built_in">GetPointerValue</span>(<span class="number">0</span>)=<span class="number">-1</span>;</span><br><span class="line">    cout&lt;&lt;value[<span class="number">0</span>]&lt;&lt;endl;</span><br><span class="line">    <span class="type">int</span> *r=<span class="built_in">GetPointersValue</span>();</span><br><span class="line">    cout&lt;&lt;r[<span class="number">0</span>]&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;r[<span class="number">1</span>]&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;r[<span class="number">2</span>]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h1><p>引用：给已有的变量取一个别名。</p>
<p>可理解为“名字”</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> n=<span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> &amp;cnt=n;</span><br></pre></td></tr></table></figure>

<p>&amp;不是取地址，只是描述别名。编译器不会为 $cnt$ 开辟新的空间。</p>
<p>引用必须初始化，且初始化后不能更改。</p>
<h2 id="作为函数参数"><a href="#作为函数参数" class="headerlink" title="作为函数参数"></a>作为函数参数</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Swap</span><span class="params">(<span class="type">int</span> &amp;a1, <span class="type">int</span> &amp;b1)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> tmp=a1;</span><br><span class="line">    a1=b1;</span><br><span class="line">    b1=tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> a=<span class="number">10</span>,b=<span class="number">20</span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;a = &quot;</span>&lt;&lt;a&lt;&lt;<span class="string">&quot;, b = &quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">Swap</span>(a,b);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;a = &quot;</span>&lt;&lt;a&lt;&lt;<span class="string">&quot;, b = &quot;</span>&lt;&lt;b&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>好处：</p>
<ol>
<li><p>函数内部直接通过引用来操作外部变量的值；</p>
</li>
<li><p>省去了指针的操作；</p>
</li>
<li><p>函数的形参不会拥有新的空间（节约了空间）。</p>
</li>
</ol>
<h2 id="常引用"><a href="#常引用" class="headerlink" title="常引用"></a>常引用</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> &amp;a=<span class="number">90</span>;</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;a = &quot;</span>&lt;&lt;a&lt;&lt;endl;</span><br></pre></td></tr></table></figure>

<h2 id="作为函数值的返回类型-1"><a href="#作为函数值的返回类型-1" class="headerlink" title="作为函数值的返回类型"></a>作为函数值的返回类型</h2><p>返回类的引用可以作为左值，并且返回的类类型引用可以直接调用成员函数来修改，返回的类类型不会调用复制构造函数。</p>
<p>可用于<strong>给函数返回值赋值</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> &amp;<span class="title">get_val</span><span class="params">(string &amp;str, string::size_type ix)</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> str[ix];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="function">string <span class="title">s</span><span class="params">(<span class="string">&quot;a value&quot;</span>)</span></span>;</span><br><span class="line">       cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line"> </span><br><span class="line">       <span class="built_in">get_val</span>(s, <span class="number">0</span>) = <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">       cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line"> </span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="动态分配内存函数簇"><a href="#动态分配内存函数簇" class="headerlink" title="动态分配内存函数簇"></a>动态分配内存函数簇</h1><h2 id="malloc"><a href="#malloc" class="headerlink" title="malloc"></a>malloc</h2><p>功能：在堆区开辟指定长度的空间，并且是连续的</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> *str=(<span class="type">char</span> *)<span class="built_in">malloc</span>(<span class="number">100</span>*<span class="built_in">sizeof</span>(<span class="type">char</span>));</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ol>
<li><p>在调用 $malloc$ 之后，需要判断申请是否成功</p>
<p>失败返回 $NULL$ ，成功返回开辟好的空间的首地址</p>
</li>
<li><p>多次 $malloc$ ，申请的内存不一定是连续的</p>
</li>
<li><p>函数返回值类型为void *，需要强制类型转换</p>
</li>
</ol>
<h2 id="calloc"><a href="#calloc" class="headerlink" title="calloc"></a>calloc</h2><p>功能：在堆区申请指定大小的空间</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> *p=(<span class="type">char</span> *)<span class="built_in">calloc</span>(<span class="number">3</span>,<span class="number">100</span>);<span class="comment">//在内存中申请了三块，每块大小为100个字节</span></span><br></pre></td></tr></table></figure>

<p>注：</p>
<p>$calloc$ 申请的内存中的内容为0，而 $malloc$ 中的内容随机</p>
<h2 id="realloc"><a href="#realloc" class="headerlink" title="realloc"></a>realloc</h2><p>功能：在原本申请好的堆区空间的基础上重新申请内存，新开辟的空间大小为函数的第二个参数</p>
<p>如果原本申请好的空间的后面不足以增加指定的大小，系统会重新找一个足够大的位置开辟指定的空间，然后将原本空间中的数据拷贝过来，然后释放原本的空间</p>
<p>如果 $newsize$ 比原先的内存小，则会释放原先内存的后面的存储空间只留前面的 $newsize$ 个字节</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> *p;</span><br><span class="line">p=(<span class="type">char</span> *)<span class="built_in">malloc</span>(<span class="number">100</span>);</span><br><span class="line">p=(<span class="type">char</span> *)<span class="built_in">realloc</span>(p,<span class="number">150</span>);</span><br><span class="line">p=(<span class="type">char</span> *)<span class="built_in">realloc</span>(p,<span class="number">50</span>);</span><br></pre></td></tr></table></figure>

<h2 id="free"><a href="#free" class="headerlink" title="free"></a>free</h2><p>功能：释放堆区的空间</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">free</span>(p);</span><br><span class="line">p=<span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<ol>
<li>$free$ 函数只能释放堆区的空间</li>
<li>当 $free$ 后，$p$ 变成野指针了，要 $p&#x3D;NULL$</li>
<li>一块动态申请的内存只能 $free$ 一次，不能多次 $free$</li>
</ol>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C-%E8%AF%AD%E6%B3%95/">C++语法</a></div><div class="post_share"><div class="social-share" data-image="/img/bing/ParanalStars_ZH-CN9247250519_1920x1080.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/%E5%89%8D%E7%BC%80%E5%92%8C%E3%80%81%E5%B7%AE%E5%88%86%E5%92%8C%E7%A6%BB%E6%95%A3%E5%8C%96.html"><img class="prev-cover" src="/img/loading.gif" data-original="/img/Bing/LargestCave_ZH-CN2069899703_1920x1080.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">前缀和、差分和离散化</div></div></a></div><div class="next-post pull-right"><a href="/C++%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7.html"><img class="next-cover" src="/img/loading.gif" data-original="/img/Bing/Aoraki_ZH-CN7776353328_1920x1080.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">C++运算符优先级</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/C++%E4%B8%AD%E7%9A%84-%E8%BF%90%E7%AE%97%E7%AC%A6.html" title="C++中的::运算符"><img class="cover" src="/img/loading.gif" data-original="/img/Bing/ArromanchesLesBains_ZH-CN0631947158_1920x1080.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-08</div><div class="title">C++中的::运算符</div></div></a></div><div><a href="/C++%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7.html" title="C++运算符优先级"><img class="cover" src="/img/loading.gif" data-original="/img/Bing/Aoraki_ZH-CN7776353328_1920x1080.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-23</div><div class="title">C++运算符优先级</div></div></a></div><div><a href="/C++%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1.html" title="C++类与对象"><img class="cover" src="/img/loading.gif" data-original="/img/Bing/RoseRoom_ZH-CN1841119971_1920x1080.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-12-07</div><div class="title">C++类与对象</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/blog_icon.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Human6sa</div><div class="author-info__description">清朗</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Human6sa"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:1415750220@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E4%B8%8E%E8%AE%BF%E9%97%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">内存地址与访问方式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8C%87%E9%92%88"><span class="toc-number">2.</span> <span class="toc-text">指针</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">2.1.</span> <span class="toc-text">定义方式：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC"><span class="toc-number">2.2.</span> <span class="toc-text">赋值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88"><span class="toc-number">2.3.</span> <span class="toc-text">数组指针</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E4%B8%8E%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-number">2.4.</span> <span class="toc-text">指针与二维数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88"><span class="toc-number">2.5.</span> <span class="toc-text">函数指针</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%80%BC%E7%9A%84%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.6.</span> <span class="toc-text">作为函数值的返回类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">引用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">3.1.</span> <span class="toc-text">作为函数参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E5%BC%95%E7%94%A8"><span class="toc-number">3.2.</span> <span class="toc-text">常引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%80%BC%E7%9A%84%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B-1"><span class="toc-number">3.3.</span> <span class="toc-text">作为函数值的返回类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%88%86%E9%85%8D%E5%86%85%E5%AD%98%E5%87%BD%E6%95%B0%E7%B0%87"><span class="toc-number">4.</span> <span class="toc-text">动态分配内存函数簇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#malloc"><span class="toc-number">4.1.</span> <span class="toc-text">malloc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#calloc"><span class="toc-number">4.2.</span> <span class="toc-text">calloc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#realloc"><span class="toc-number">4.3.</span> <span class="toc-text">realloc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#free"><span class="toc-number">4.4.</span> <span class="toc-text">free</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Qt%E5%88%9B%E5%BB%BA%E6%96%B0%E6%96%87%E4%BB%B6%E6%8A%A5%E9%94%99.html" title="Qt创建新文件报错"><img src="/img/loading.gif" data-original="/img/Bing/UNBuilding_ZH-CN7730281645_1920x1080.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Qt创建新文件报错"/></a><div class="content"><a class="title" href="/Qt%E5%88%9B%E5%BB%BA%E6%96%B0%E6%96%87%E4%BB%B6%E6%8A%A5%E9%94%99.html" title="Qt创建新文件报错">Qt创建新文件报错</a><time datetime="2024-02-07T14:24:10.000Z" title="发表于 2024-02-07 22:24:10">2024-02-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/python%E4%B8%AD%E7%9A%84%E8%BE%93%E5%87%BA%E5%87%BD%E6%95%B0.html" title="【Python】print()函数的使用"><img src="/img/loading.gif" data-original="/img/Bing/Firefox_ZH-CN0575885603_1920x1080.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Python】print()函数的使用"/></a><div class="content"><a class="title" href="/python%E4%B8%AD%E7%9A%84%E8%BE%93%E5%87%BA%E5%87%BD%E6%95%B0.html" title="【Python】print()函数的使用">【Python】print()函数的使用</a><time datetime="2023-09-12T12:12:51.000Z" title="发表于 2023-09-12 20:12:51">2023-09-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/C++%E4%B8%AD%E7%9A%84-%E8%BF%90%E7%AE%97%E7%AC%A6.html" title="C++中的::运算符"><img src="/img/loading.gif" data-original="/img/Bing/ArromanchesLesBains_ZH-CN0631947158_1920x1080.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++中的::运算符"/></a><div class="content"><a class="title" href="/C++%E4%B8%AD%E7%9A%84-%E8%BF%90%E7%AE%97%E7%AC%A6.html" title="C++中的::运算符">C++中的::运算符</a><time datetime="2022-12-08T13:11:51.000Z" title="发表于 2022-12-08 21:11:51">2022-12-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/C++%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1.html" title="C++类与对象"><img src="/img/loading.gif" data-original="/img/Bing/RoseRoom_ZH-CN1841119971_1920x1080.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++类与对象"/></a><div class="content"><a class="title" href="/C++%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1.html" title="C++类与对象">C++类与对象</a><time datetime="2022-12-07T03:12:44.000Z" title="发表于 2022-12-07 11:12:44">2022-12-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%89%8D%E7%BC%80%E5%92%8C%E3%80%81%E5%B7%AE%E5%88%86%E5%92%8C%E7%A6%BB%E6%95%A3%E5%8C%96.html" title="前缀和、差分和离散化"><img src="/img/loading.gif" data-original="/img/Bing/LargestCave_ZH-CN2069899703_1920x1080.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前缀和、差分和离散化"/></a><div class="content"><a class="title" href="/%E5%89%8D%E7%BC%80%E5%92%8C%E3%80%81%E5%B7%AE%E5%88%86%E5%92%8C%E7%A6%BB%E6%95%A3%E5%8C%96.html" title="前缀和、差分和离散化">前缀和、差分和离散化</a><time datetime="2022-12-05T13:22:47.000Z" title="发表于 2022-12-05 21:22:47">2022-12-05</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/bing/ParanalStars_ZH-CN9247250519_1920x1080.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Human6sa</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">「清醒地思考，勇敢地前进」</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'wSHDzkm9xBpfpeRdREXPp7pX-gzGzoHsz',
      appKey: '5Fi5DVNozbIk47fUlXws7SZk',
      avatar: 'retro',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="/js/rdmbkg.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>